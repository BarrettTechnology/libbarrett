# New wam configuration file

wam:
{

   # wam hardware-specific stuff
   wambot:
   {
	   bus:
	   {
		   port = 0;
	   };
	   dof = 4;
	   home = ( 0, -1.96, 0, 3.15 );
	   j2mp = (( -42.0,      0,        0,     0 ),
	           (     0,  28.25, -16.8155,     0 ),
	           (     0, -28.25, -16.8155,     0 ),
	           (     0,      0,        0, -18.0 ));
   };

   kinematics:
   {
	   # For a 4-DOF WAM
	   moving:
	   (
		   # Note: alpha_pi = alpha / pi
		   { alpha_pi = -0.5; a =      0; d =      0; }, # Base Yaw
		   { alpha_pi =  0.5; a =      0; d =      0; }, # Base Pitch
		   { alpha_pi = -0.5; a =  0.045; d = 0.5500; }, # Twist
		   { alpha_pi =  0.5; a = -0.045; d =      0; }  # Elbow
	   );
	   toolplate = { alpha_pi = 0; theta_pi = 0; a = 0; d = 0.36; };
   };
   
   dynamics:
   {
/*    FROM WAM4.CONF
      moving:
      (
         {
            # Link 1
            mass = 8.3936;
            com = ( 0.3506e-3, 132.6795e-3, 0.6286e-3 );
            I = (( 95157.4294e-6,   246.1404e-6,   -95.0183e-6 ),
                 (   246.1404e-6, 92032.3524e-6,  -962.6725e-6 ),
                 (   -95.0183e-6,  -962.6725e-6, 59290.5997e-6 ));
         },
         {
            # Link 2
            mass = 4.8487;
            com = ( -0.2230e-3, -21.3924e-3, 13.3754e-3 );
            I = (( 29326.8098e-6,   -43.3994e-6,  -129.2942e-6 ),
                 (   -43.3994e-6, 20781.5826e-6,  1348.6924e-6 ),
                 (  -129.2942e-6,  1348.6924e-6, 22807.3271e-6 ));
         },
         {
            # Link 3
            mass = 1.7251;
            com = ( -38.7565e-3, 217.9078e-3, 0.0252e-3 );
            I = (( 56662.2970e-6, -2321.6892e-6,     8.2125e-6 ),
                 ( -2321.6892e-6,  3158.0509e-6,   -16.6307e-6 ),
                 (     8.2125e-6,   -16.6307e-6, 56806.6024e-6 ));
         },
         {
            # Link 4
            mass = 1.0912;
            com = ( 11.7534e-3, -0.1092e-3, 135.9144e-3 );
            I = (( 18890.7885e-6,    -0.8092e-6, -1721.2915e-6 ),
                 (    -0.8092e-6, 19340.5969e-6,    17.8241e-6 ),
                 ( -1721.2915e-6,    17.8241e-6,  2026.8453e-6 ));
         }
*/

      /* From inertial specifications Sept 2008 */
      moving:
      (
         {
            # Link 1
            mass = 10.7677;
            com = ( -4.43e-3, 121.89e-3, -0.66e-3 );
            I = (( 134880.33e-6,  -2130.41e-6,  -124.85e-6 ),
                 (  -2130.41e-6, 113283.69e-6,   685.55e-6 ),
                 (   -124.85e-6,    685.55e-6, 90463.30e-6 ));
         },
         {
            # Link 2
            mass = 3.8749;
            com = ( -2.37e-3, 31.06e-3, 15.42e-3 );
            I = (( 21409.58e-6,   271.72e-6,    24.61e-6 ),
                 (   271.72e-6, 13778.75e-6, -1819.20e-6 ),
                 (    24.61e-6, -1819.20e-6, 15589.06e-6 ));
         },
         {
            # Link 3
            mass = 1.8023;
            com = ( -38.26e-3, 207.51e-3, 0.03e-3 );
            I = (( 59110.77e-6, -2496.12e-6,     7.38e-6 ),
                 ( -2496.12e-6,  3245.50e-6,   -17.67e-6 ),
                 (     7.38e-6,   -17.67e-6, 59270.43e-6 ));
         },
         {
            # Link 4
            mass = 1.0651;
            com = ( 10.95e-3, -0.03e-3, 140.54e-3 );
            I = (( 18485.77e-6,     2.19e-6, -1608.68e-6 ),
                 (     2.19e-6, 18916.58e-6,     5.15e-6 ),
                 ( -1608.68e-6,     5.15e-6,  1975.17e-6 ));
         }

         # Tool?
      );
   };

   calgrav:
   {
      # For 4-DOF, w/ small black rod, drill chuck
      #mus = (( 0.333818,  0.000000, -0.006954 ),
      #       ( 0.114217,  0.287953,  2.215271 ),
      #       ( 0.039575,  0.372846, -0.056212 ),
      #       (-0.076891,  0.000003,  0.579015 ));
	   # For a 4-DOF WAM, old haptic ball
      mus = (( 0.335045,  0.000000, -0.006736 ),
             ( 0.015840,  0.192846,  1.769963 ),
             ( 0.074835,  0.199366, -0.058917 ),
             (-0.048675, -0.000002,  0.306211 ));

   };
   
   control_joint_legacy:
   {
      pids:
      (
         { p =  900; i = 2.5; d =  10; },
         { p = 2500; i = 5.0; d =  20; },
         { p =  600; i = 2.5; d =  10; },
         { p =  500; i = 0.5; d = 2.5; }
      );
   };
   
   control_joint:
   {
      pids:
      (
         { p = 5000; i = 0; d = 5; },
         { p = 5000; i = 0; d = 5; },
         { p = 5000; i = 0; d = 5; },
         { p = 5000; i = 0; d = 5; }
      );
   };
   
   control_cartesian_xyz:
   {
      pids:
      {
         x: { p = 2000; i = 0; d = 20; };
         y: { p = 2000; i = 0; d = 20; };
         z: { p = 2000; i = 0; d = 20; };
      };
   };
   
   control_cartesian_xyz_q:
   {
      pids:
      {
         x: { p = 2000; i = 0; d = 20; };
         y: { p = 2000; i = 0; d = 20; };
         z: { p = 2000; i = 0; d = 20; };
         rot: { p = 20; d = 0.2; };
      };
   };
};

# Eventually, it would be cool to collect all tool-related
# information here:
tool:
{
   
};
